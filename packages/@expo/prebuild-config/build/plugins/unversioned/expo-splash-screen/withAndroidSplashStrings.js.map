{"version":3,"file":"withAndroidSplashStrings.js","names":["_configPlugins","data","require","_fadeDurationUtils","_getAndroidSplashConfig","RESIZE_MODE_KEY","STATUS_BAR_TRANSLUCENT_KEY","FADE_DURATION_MS_KEY","defaultResizeMode","withAndroidSplashStrings","config","splash","withStringsXml","splashConfig","getAndroidSplashConfig","_ref","_splash$resizeMode","_config$androidStatus","resizeMode","statusBarTranslucent","androidStatusBar","translucent","duration","fadeDurationMs","computeFadeDurationMs","WarningAggregator","addWarningAndroid","minFadeDurationMs","maxFadeDurationMs","defaultFadeDurationMs","modResults","setSplashStrings","exports","strings","AndroidConfig","Strings","setStringItem","Resources","buildResourceItem","name","value","translatable","String"],"sources":["../../../../src/plugins/unversioned/expo-splash-screen/withAndroidSplashStrings.ts"],"sourcesContent":["import {\n  AndroidConfig,\n  ConfigPlugin,\n  WarningAggregator,\n  withStringsXml,\n} from '@expo/config-plugins';\n\nimport {\n  minFadeDurationMs,\n  maxFadeDurationMs,\n  computeFadeDurationMs,\n  defaultFadeDurationMs,\n} from './fadeDurationUtils';\nimport { getAndroidSplashConfig } from './getAndroidSplashConfig';\n\nconst RESIZE_MODE_KEY = 'expo_splash_screen_resize_mode';\nconst STATUS_BAR_TRANSLUCENT_KEY = 'expo_splash_screen_status_bar_translucent';\nconst FADE_DURATION_MS_KEY = 'expo_splash_screen_fade_duration_ms';\n\ninterface ExtraProps {\n  resizeMode?: string;\n  fadeDurationMs?: number;\n}\n\nconst defaultResizeMode = 'contain';\n\nexport const withAndroidSplashStrings: ConfigPlugin<ExtraProps> = (config, splash) => {\n  return withStringsXml(config, (config) => {\n    const splashConfig = getAndroidSplashConfig(config);\n    if (splashConfig) {\n      const resizeMode = splash?.resizeMode ?? splashConfig?.resizeMode ?? defaultResizeMode;\n      const statusBarTranslucent = !!config.androidStatusBar?.translucent;\n      let duration;\n      if (splash?.fadeDurationMs) {\n        duration = computeFadeDurationMs(splash?.fadeDurationMs);\n        if (duration !== splash?.fadeDurationMs) {\n          WarningAggregator.addWarningAndroid(\n            'fadeDurationMs',\n            `The fade duration value must be between ${minFadeDurationMs} and ${maxFadeDurationMs}. Using ${duration}.`\n          );\n        }\n      } else if (splashConfig?.fadeDurationMs) {\n        duration = computeFadeDurationMs(splashConfig?.fadeDurationMs);\n        if (duration !== splashConfig?.fadeDurationMs) {\n          WarningAggregator.addWarningAndroid(\n            'fadeDurationMs',\n            `The fade duration value must be between ${minFadeDurationMs} and ${maxFadeDurationMs}. Using ${duration}.`\n          );\n        }\n      } else {\n        duration = defaultFadeDurationMs;\n      }\n      config.modResults = setSplashStrings(\n        config.modResults,\n        resizeMode,\n        statusBarTranslucent,\n        `${duration}`\n      );\n    }\n    return config;\n  });\n};\n\nexport function setSplashStrings(\n  strings: AndroidConfig.Resources.ResourceXML,\n  resizeMode: string,\n  statusBarTranslucent: boolean,\n  fadeDurationMs: string\n): AndroidConfig.Resources.ResourceXML {\n  return AndroidConfig.Strings.setStringItem(\n    [\n      AndroidConfig.Resources.buildResourceItem({\n        name: RESIZE_MODE_KEY,\n        value: resizeMode,\n        translatable: false,\n      }),\n      AndroidConfig.Resources.buildResourceItem({\n        name: STATUS_BAR_TRANSLUCENT_KEY,\n        value: String(statusBarTranslucent),\n        translatable: false,\n      }),\n      AndroidConfig.Resources.buildResourceItem({\n        name: FADE_DURATION_MS_KEY,\n        value: String(fadeDurationMs),\n        translatable: false,\n      }),\n    ],\n    strings\n  );\n}\n"],"mappings":"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"}