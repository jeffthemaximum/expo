{"version":3,"file":"withAndroidSplashScreen.js","names":["_configPlugins","data","require","_jsonFile","_interopRequireDefault","_debug","_resolveFrom","_semver","_getAndroidSplashConfig","_withAndroidSplashDrawables","_withAndroidSplashImages","_withAndroidSplashLegacyMainActivity","_withAndroidSplashStrings","_withAndroidSplashStyles","obj","__esModule","default","debug","Debug","withAndroidSplashScreen","config","splash","_splash","_config$androidStatus","getAndroidSplashConfig","backgroundColor","androidStatusBar","_config$androidStatus2","_config$androidStatus3","_config$androidStatus4","toLowerCase","call","WarningAggregator","addWarningAndroid","withPlugins","withAndroidSplashImages","withAndroidSplashDrawables","shouldUpdateLegacyMainActivity","withAndroidSplashLegacyMainActivity","withAndroidSplashStyles","withAndroidSplashStrings","exports","_config$_internal","projectRoot","_internal","packagePath","resolveFrom","_JsonFile$read$versio","_JsonFile$read$versio2","version","JsonFile","read","toString","semver","lt","sdkVersion"],"sources":["../../../../src/plugins/unversioned/expo-splash-screen/withAndroidSplashScreen.ts"],"sourcesContent":["import { ConfigPlugin, WarningAggregator, withPlugins } from '@expo/config-plugins';\nimport { ExpoConfig } from '@expo/config-types';\nimport JsonFile from '@expo/json-file';\nimport Debug from 'debug';\nimport resolveFrom from 'resolve-from';\nimport semver from 'semver';\n\nimport { AndroidSplashConfig, getAndroidSplashConfig } from './getAndroidSplashConfig';\nimport { withAndroidSplashDrawables } from './withAndroidSplashDrawables';\nimport { withAndroidSplashImages } from './withAndroidSplashImages';\nimport { withAndroidSplashLegacyMainActivity } from './withAndroidSplashLegacyMainActivity';\nimport { withAndroidSplashStrings } from './withAndroidSplashStrings';\nimport { withAndroidSplashStyles } from './withAndroidSplashStyles';\n\nconst debug = Debug('expo:prebuild-config:expo-splash-screen:android');\n\nexport const withAndroidSplashScreen: ConfigPlugin<\n  AndroidSplashConfig | undefined | null | void\n> = (config, splash) => {\n  // If the user didn't specify a splash object, infer the splash object from the Expo config.\n  if (!splash) {\n    splash = getAndroidSplashConfig(config);\n  } else {\n    debug(`custom splash config provided`);\n  }\n\n  // Update the android status bar to match the splash screen\n  // androidStatusBar applies info to the app activity style.\n  const backgroundColor = splash?.backgroundColor || '#ffffff';\n  if (config.androidStatusBar?.backgroundColor) {\n    if (\n      backgroundColor.toLowerCase() !== config.androidStatusBar?.backgroundColor?.toLowerCase?.()\n    ) {\n      WarningAggregator.addWarningAndroid(\n        'androidStatusBar.backgroundColor',\n        'Color conflicts with the splash.backgroundColor'\n      );\n    }\n  } else {\n    if (!config.androidStatusBar) config.androidStatusBar = {};\n    config.androidStatusBar.backgroundColor = backgroundColor;\n  }\n\n  return withPlugins(config, [\n    withAndroidSplashImages,\n    [withAndroidSplashDrawables, splash],\n    ...(shouldUpdateLegacyMainActivity(config) ? [withAndroidSplashLegacyMainActivity] : []),\n    withAndroidSplashStyles,\n    [withAndroidSplashStrings, splash],\n  ]);\n};\n\nfunction shouldUpdateLegacyMainActivity(config: ExpoConfig): boolean {\n  try {\n    const projectRoot = config._internal?.projectRoot;\n    const packagePath = resolveFrom(projectRoot, 'expo-splash-screen/package.json');\n    if (packagePath) {\n      const version = JsonFile.read(packagePath).version?.toString() ?? '';\n      return semver.lt(version, '0.12.0');\n    }\n    // If expo-splash-screen didn't be installed or included in template, we check the sdkVersion instead.\n    return !!(config.sdkVersion && semver.lt(config.sdkVersion, '43.0.0'));\n  } catch {}\n  return false;\n}\n"],"mappings":"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"}